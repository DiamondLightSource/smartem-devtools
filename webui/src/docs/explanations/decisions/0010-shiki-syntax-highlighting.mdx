# 10. Use Shiki for syntax highlighting in documentation

Date: 12/12/2025

## Status

Accepted

## Context

The SmartEM developer documentation contains extensive code examples across multiple languages (Python, Bash, YAML, TypeScript, SQL). Proper syntax highlighting significantly improves readability and reduces cognitive load when scanning documentation.

Two primary options were evaluated for MDX-based syntax highlighting:

**rehype-prism-plus** (Prism.js-based):
- Mature ecosystem with many existing themes
- Lighter bundle size and faster build times (~500ms for 400 articles)
- However, Prism v2 development has stalled (no updates in 2+ years)
- UMD module format creates integration friction with modern ESM tooling
- The original @mapbox/rehype-prism is no longer maintained as of April 2024

**Shiki** (via rehype-pretty-code):
- Uses the same TextMate grammar engine as VS Code
- Syntax highlighting matches exactly what developers see in their editor
- Active development with v1.0.0 released February 2024
- Modern ESM format, integrates cleanly with Vite
- Access to VS Code's extensive theme ecosystem
- Slightly slower build times (~2s for 400 articles) and larger bundle

## Decision

We will use **Shiki** via the `rehype-pretty-code` plugin for syntax highlighting in MDX documentation.

Configuration uses the `github-dark` theme to match the dark aesthetic of the developer dashboard UI.

## Consequences

**Positive:**
- Syntax highlighting matches VS Code exactly, reducing context-switching friction
- Access to high-quality VS Code themes (github-dark matches our UI)
- Actively maintained with modern ESM architecture
- Better accuracy for edge cases in language grammars
- Future-proof choice as Prism development has stalled

**Negative:**
- Slightly larger bundle size compared to Prism
- Slower build times (acceptable for our documentation volume)
- Less familiar to developers who have used Prism extensively

**Trade-offs accepted:**
- Build time increase is negligible for our ~50 documentation pages
- Bundle size increase is acceptable given the improved developer experience
